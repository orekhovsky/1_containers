# Лабораторная работа 1

## Плохой докер файл
- Используется тег `latest` (нестабильно)
- Копируется весь проект (включая лишние файлы)
- Зависимости устанавливаются без `--no-cache-dir`
- Приложение запускается от root пользователя
- Создается один большой слой при копировании

## Хороший докер файл
- Фиксированная версия Python (3.11-slim)
- Многоэтапная сборка для кэширования зависимостей
- Установка зависимостей с очисткой кэша
- Создание отдельного пользователя для безопасности
- Копируется только необходимый исходный код

## Две плохие практики использования контейнеров
1. **Хранение данных в контейнере** - при перезапуске все сокращенные ссылки теряются
2. **Отсутствие volume для логов** - логи остаются внутри контейнера и удаляются с ним

## Запуск приложения

```bash
# Сборка образа
docker build -t url-shortener -f Dockerfile.good .

# Запуск контейнера с volume для логов
docker run -d --name backend -v "./logs:/app/logs" -p 8000:8000 url-shortener

# Создание короткой ссылки
curl -X POST http://localhost:8000/shorten \
  -H "Content-Type: application/json" \
  -d '{"url":"https://example.com"}'

# Проверка работы
curl http://localhost:8000/health